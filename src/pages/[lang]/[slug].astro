---
/**
 * Router din치mico para p치ginas internas
 * URLs: /es/modulos, /en/modules, /es/precios, /en/pricing, etc.
 * 
 * Los templates ya incluyen su propio Layout
 */
import ModulosPage from "@/templates/ModulosPage.astro";
import PreciosPage from "@/templates/PreciosPage.astro";
import TecnologiaPage from "@/templates/TecnologiaPage.astro";
import ContactoPage from "@/templates/ContactoPage.astro";
import { type Lang } from "@/config/pages";

export function getStaticPaths() {
  const supportedLangs = ['es', 'en', 'fr', 'ca', 'pt-br'] as const;
  type LangType = typeof supportedLangs[number];

  // Definici칩n de p치ginas con sus slugs por idioma
  const pageDefinitions: Record<string, { slugs: Record<LangType, string> }> = {
    modulos: {
      slugs: { es: 'modulos', en: 'modules', fr: 'modules', ca: 'moduls', 'pt-br': 'modulos' },
    },
    precios: {
      slugs: { es: 'precios', en: 'pricing', fr: 'tarifs', ca: 'preus', 'pt-br': 'precos' },
    },
    tecnologia: {
      slugs: { es: 'tecnologia', en: 'technology', fr: 'technologie', ca: 'tecnologia', 'pt-br': 'tecnologia' },
    },
    contacto: {
      slugs: { es: 'contacto', en: 'contact', fr: 'contact', ca: 'contacte', 'pt-br': 'contato' },
    },
  };

  const paths: { 
    params: { lang: string; slug: string }; 
    props: { pageKey: string } 
  }[] = [];

  for (const lang of supportedLangs) {
    for (const [pageKey, pageDef] of Object.entries(pageDefinitions)) {
      const slug = pageDef.slugs[lang];
      paths.push({
        params: { lang, slug },
        props: { pageKey },
      });
    }
  }

  return paths;
}

interface Props {
  pageKey: string;
}

const { lang } = Astro.params;
const { pageKey } = Astro.props;
const currentLang = (lang || 'es') as Lang;
---

{pageKey === 'modulos' && <ModulosPage lang={currentLang} pageId="modulos" />}
{pageKey === 'precios' && <PreciosPage lang={currentLang} pageId="precios" />}
{pageKey === 'tecnologia' && <TecnologiaPage lang={currentLang} pageId="tecnologia" />}
{pageKey === 'contacto' && <ContactoPage lang={currentLang} pageId="contacto" />}
